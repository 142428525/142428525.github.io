<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>琪露诺的完美算数教室</title>
		<link rel="icon" href="favicon.ico" />
		<link rel="shortcut icon" href="favicon.ico" /> 
		<link rel="apple-touch-icon" href="favicon.ico" />
		<link rel="apple-touch-icon-precomposed" href="favicon.ico" />

	</head>
	<style>
	body
	{
		background-image:url('https://www.helloimg.com/images/2021/09/12/CM7LJM.md.png');
		background-repeat:no-repeat;
		background-position:1000px top;
		margin-left:500px;
	}
	.button {
		background-color: #4C50AF;
		border: none;
		color: white;
		padding: 15px 32px;
		text-align: center;
		text-decoration: none;
		display: inline-block;
		font-size: 16px;
		margin: 4px 2px;
		cursor: pointer;
	}
	</style>
	<body>
		<script>
			window.onclick = function()
			{
				audio.play();
			}
			
			var point = 0;
			var time = 4;
			var interval;
			
			var a = Math.floor((Math.random()*4.5)+1);
			var b = Math.floor((Math.random()*4.5)+1);
			var choose_botton = Math.floor(Math.random()*(2));
	
			function start()
			{
				document.getElementById('pre_start').style.visibility='hidden'
				document.getElementById('pre_start').style.height='0';
				document.getElementById('started').style.visibility='visible';
				
				formula_random();
				
				interval = setInterval(function(){timer()},1000);
			}
	
			function timer()
			{
				if (time>0)
				{
					time--;
				}
				else
				{
					clearInterval(interval);
					alert('你不幸被冻成了个冰坨...');
					location.href = 'index.html';
				}
				document.getElementById('timer').innerHTML = '倒计时：'+time;
			}
			
			function formula_random()
			{
				a = Math.floor((Math.random()*4.5)+1);
				b = Math.floor((Math.random()*4.5)+1);
				choose_botton = Math.floor(Math.random()*(2));
				
				document.getElementById('formula').innerHTML = a+' + '+b+' = ';
				document.getElementById('points').innerHTML = '分数：'+point;
				
				if (choose_botton == 0)
				{
					document.getElementById('left_botton').innerHTML = a+b;
					document.getElementById('right_botton').innerHTML = Math.floor((Math.random()*9)+1)-1;
				}
				else
				{
					document.getElementById('right_botton').innerHTML = a+b;
					document.getElementById('left_botton').innerHTML = Math.floor((Math.random()*9)+1)-1;
				}
			}
			
			function check_left_botton()
			{
				if (choose_botton == 0)
				{
					if (a+b == 9)
					{
						time = 4;
						point++;
						formula_random();
					}
					else
					{
						clearInterval(interval);
						alert('你不幸被冻成了个冰坨...');
						location.href = 'index.html';
					}
				}
				else
				{
					if (a+b == 9)
					{
						clearInterval(interval);
						alert('你不幸被冻成了个冰坨...');
						location.href = 'index.html';
					}
					else
					{
						time = 4;
						point++;
						formula_random();
					}
					
				}
			}
			
			function check_right_botton()
			{
				if (choose_botton == 0)
				{
					if (a+b == 9)
					{
						clearInterval(interval);
						alert('你不幸被冻成了个冰坨...');
						location.href = 'index.html';
					}
					else
					{
						time = 4;
						point++;
						formula_random();
					}
				}
				else
				{
					if (a+b == 9)
					{
						time = 4;
						point++;
						formula_random();
					}
					else
					{
						clearInterval(interval);
						alert('你不幸被冻成了个冰坨...');
						location.href = 'index.html';
					}
					
				}
			}
		</script>
	
		<audio loop id="audio">
			<source src="chiruno.mp3" type="audio/mpeg">
			您的浏览器不支持 audio 元素。
		</audio>
		
		<div id="pre_start">
			<h1>一定要仔细选择哦！</h1>
			<p>(鼠标点击后播放背景音乐，如未播放请启用JavaScript)</p>
			<a class="button" onclick="start()">开始</a>
		</div>
		
		<div id="started" style="visibility:hidden;width:400px;">
			<div style="float:right;">
				<p id="points">7 </p>
			</div>
			<div style="float:left;">
				<p id="timer">倒计时：4</p>
			</div>
			<br/><br/><br/>
			<div>
				<p id="formula" style="font-size:48px;"> </p>
				<a id="left_botton" class="button" onclick="check_left_botton()"> </a>
				<a id="right_botton" class="button" onclick="check_right_botton()"> </a>
			</div>
		</div>
	</body>
</html>
